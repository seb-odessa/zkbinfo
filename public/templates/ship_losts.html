<!DOCTYPE html>
<html>

<head>
    <title>{{name}}'s lost {{ship_name}} ships</title>
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <script type="text/javascript" src="/js/script.js"></script>
    <div class="content">
        <h3>{{name}}'s lost {{ship_name}} ships</h3>

        <table>
            <tr>
                <th>Killmail</th>
                <th>Character</th>
                <th>Corporation</th>
                <th>Alliance</th>
                <th>Ship</th>
                <th>Damage</th>
                <th>Solar Sysyem</th>
                <th>Time</th>
            </tr>
            {{#each killmails}}
            <tr>
                <td allign="right"><a href="https://zkillboard.com/kill/{{killmail_id}}">{{killmail_id}}</a></td>
                <td>
                    <a href="/gui/character/id/{{character_id}}/">
                        <div class="{{character_id}}" div style="display: inline">{{character_id}}</div>
                    </a>
                </td>
                <td>
                    <a href="/gui/corporation/id/{{corporation_id}}/">
                        <div class="{{corporation_id}}" div style="display: inline">{{corporation_id}}</div>
                    </a>
                </td>
                <td>
                    {{#if alliance_id}}
                    <a href="/gui/alliance/id/{{alliance_id}}/">
                        <div class="{{alliance_id}}" div style="display: inline">{{alliance_id}}</div>
                    </a>
                    {{/if}}
                </td>
                <td>
                    <div class="{{ship_type_id}}" div style="display: inline">{{ship_type_id}}</div>
                </td>
                <td>{{damage}}</td>
                <td>
                    <a href="https://zkillboard.com/system/{{solar_system_id}}/">
                        <div class="{{solar_system_id}}" div style="display: inline">{{solar_system_id}}</div>
                    </a>
                </td>
                <td>{{killmail_time}}</td>
            </tr>
            {{/each}}
        </table>

        <script>
            requestNamesAsync(JSON.parse("{{ids}}"))
                .then(names => {
                    names.forEach((obj) => {
                        const class_name = `${obj.id}`;
                        const elements = document.getElementsByClassName(class_name);
                        for (var i = 0; i < elements.length; i++) {
                            elements[i].innerHTML = obj.name;
                        }
                    });
                });
        </script>
    </div>
</body>

</html>